version: 2

sources:
  - name: atp_db 
    description: "Base de datos cruda con información histórica de la ATP."
    database: tfg
    schema: bronze          
    tables:
      - name: ranking_atp    
        description: "Histórico semanal del ranking ATP (datos de origen)."
        columns:
          - name: id_ranking
            description: "Identificador único del registro."
            tests:
              - not_null
              - unique

          - name: ranking_fecha
            description: "Fecha de publicación del ranking."
            tests:
              - not_null

          - name: posicion_ranking
            description: "Posición numérica en el ranking ATP."
            tests:
              - not_null
              - dbt_expectations.expect_column_values_to_be_between:
                  min_value: 1

          - name: id_jugador
            description: "Identificador único del jugador."
            tests:
              - not_null

          - name: puntos
            description: "Puntos acumulados en el ranking."
            tests:
              - dbt_expectations.expect_column_values_to_be_between:
                  min_value: 0

          - name: ingesta_tmz
            description: "Timestamp de ingesta en el sistema origen."
            tests:
              - not_null